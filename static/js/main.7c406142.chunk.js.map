{"version":3,"sources":["components/layout/Layout.module.css","services/apiService.ts","store/children-context.tsx","components/ChildItem/ChildItem.tsx","components/ChildrenList/ChildrenList.tsx","components/layout/MainNavigation.tsx","components/layout/Layout.tsx","App.tsx","index.tsx"],"names":["module","exports","ChildrenService","getChildren","axios","get","params","accessToken","process","groupId","institutionId","checkInChildApi","childId","pickupTime","post","checkOutChildApi","ChildrenContext","React","createContext","items","loadedItems","totalItems","currentPage","pageCount","toggleCheckin","child","pageChange","evt","page","ChildrenContextProvider","props","useState","children","setChildren","loadedChildren","setLoadedChildren","total","setTotal","setPageCount","setCurrentPage","itemsPerPage","useEffect","then","data","length","Math","ceil","slice","contextValue","response","index","findIndex","ch","updatedChildren","checkedIn","checkinTime","preventDefault","Provider","value","ChildItem","dateTime","isCheckedIn","childrenCtx","useContext","pickupTimeInputRef","useRef","Box","display","gridTemplateColumns","gridGap","p","Avatar","src","item","image","small","size","name","fullName","Date","toLocaleTimeString","hour","minute","timeZone","ButtonOutline","onClick","TextInput","aria-label","variant","placeholder","ref","sx","mr","ButtonPrimary","current","trim","ChildrenList","flexGrow","verticalAlign","borderColor","borderWidth","borderStyle","borderRadius","bg","color","borderBottomColor","borderBottomStyle","borderBottomWidth","fontWeight","map","Pagination","onPageChange","MainNavigation","Header","Item","full","Link","href","alt","Layout","className","classes","main","App","ThemeProvider","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.7c406142.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"Layout_main__auk_r\"};","import axios, { AxiosResponse } from \"axios\";\nimport { Child } from \"../models/Child\";\n\nconst groupId = \"86413ecf-01a1-44da-ba73-1aeda212a196\";\nconst institutionId = \"dc4bd858-9e9c-4df7-9386-0d91e42280eb\";\nconst accessToken = process.env.REACT_APP_ACCESS_TOKEN;\n\nexport default class ChildrenService {\n  getChildren = (): Promise<AxiosResponse<{ children: Child[] }>> => {\n    return axios.get(`https://app.famly.co/api/daycare/tablet/group`, {\n      params: {\n        accessToken,\n        groupId,\n        institutionId,\n      },\n    });\n  };\n\n  checkInChildApi = (\n    childId: string,\n    pickupTime: string\n  ): Promise<AxiosResponse<any, any>> => {\n    return axios.post(\n      `https://app.famly.co/api/v2/children/${childId}/checkins`,\n      {\n        accessToken: process.env.REACT_APP_ACCESS_TOKEN,\n        pickupTime,\n      }\n    );\n  };\n\n  checkOutChildApi = (childId: string): Promise<AxiosResponse<any, any>> => {\n    return axios.post(\n      `https://app.famly.co/api/v2/children/${childId}/checkout`,\n      {\n        accessToken: process.env.REACT_APP_ACCESS_TOKEN,\n      }\n    );\n  };\n}\n","import React, { useEffect, useState } from \"react\";\n\nimport { Child } from \"../models/Child\";\nimport ChildrenService from \"../services/apiService\";\n\ntype ChildrenContextObj = {\n  items: Child[];\n  loadedItems: Child[];\n  totalItems: number;\n  currentPage: number;\n  pageCount: number;\n  toggleCheckin: (child: Child, pickupTime?: string) => void;\n  pageChange: (evt: React.MouseEvent, page: number) => void;\n};\n\nexport const ChildrenContext = React.createContext<ChildrenContextObj>({\n  items: [],\n  loadedItems: [],\n  totalItems: 0,\n  currentPage: 1,\n  pageCount: 1,\n  toggleCheckin: (child: Child, pickupTime?: string) => {},\n  pageChange: (evt: React.MouseEvent, page: number) => {},\n});\n\nconst ChildrenContextProvider: React.FC = (props) => {\n  const [children, setChildren] = useState<Child[]>([]);\n  const [loadedChildren, setLoadedChildren] = useState<Child[]>([]);\n  const [total, setTotal] = useState<number>(0);\n\n  const [pageCount, setPageCount] = useState(1);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage] = useState(10);\n\n  useEffect(() => {\n    new ChildrenService().getChildren().then((data) => {\n      setChildren(data.data.children);\n      setTotal(data.data.children.length);\n      setPageCount(Math.ceil(data.data.children.length / itemsPerPage));\n    });\n  }, [itemsPerPage]);\n\n  useEffect(() => {\n    const items = children.slice(\n      (currentPage - 1) * itemsPerPage,\n      currentPage * itemsPerPage\n    );\n    setLoadedChildren(items);\n  }, [children, currentPage, itemsPerPage]);\n\n  const checkinHandler = (child: Child, pickupTime?: string) => {\n    // Checkin\n    if (pickupTime) {\n      new ChildrenService()\n        .checkInChildApi(child.childId, pickupTime)\n        .then((response) => {\n          const index = children.findIndex(\n            (ch) => ch.childId === child.childId\n          );\n          let updatedChildren = [...children];\n          updatedChildren[index].checkedIn = true;\n          updatedChildren[index].checkinTime = response.data.checkinTime;\n          updatedChildren[index].pickupTime = response.data.pickupTime;\n          setChildren(updatedChildren);\n        });\n    }\n    // Checkout\n    else {\n      new ChildrenService().checkOutChildApi(child.childId).then((response) => {\n        const index = children.findIndex((ch) => ch.childId === child.childId);\n        let updatedChildren = [...children];\n        updatedChildren[index].checkedIn = false;\n        setChildren(updatedChildren);\n      });\n    }\n  };\n\n  const pageChangedHandler = (evt: React.MouseEvent, page: number) => {\n    evt.preventDefault();\n    setCurrentPage(page);\n  };\n\n  const contextValue: ChildrenContextObj = {\n    items: children,\n    loadedItems: loadedChildren,\n    totalItems: total,\n    currentPage: currentPage,\n    pageCount: pageCount,\n    toggleCheckin: checkinHandler,\n    pageChange: pageChangedHandler,\n  };\n\n  return (\n    <ChildrenContext.Provider value={contextValue}>\n      {props.children}\n    </ChildrenContext.Provider>\n  );\n};\n\nexport default ChildrenContextProvider;\n","import {\n  Avatar,\n  Box,\n  ButtonOutline,\n  ButtonPrimary,\n  TextInput,\n} from \"@primer/components\";\nimport { useContext, useRef } from \"react\";\nimport { Child } from \"../../models/Child\";\nimport { ChildrenContext } from \"../../store/children-context\";\n\nconst ChildItem: React.FC<{ item: Child }> = (props) => {\n  const childrenCtx = useContext(ChildrenContext);\n\n  const pickupTimeInputRef = useRef<HTMLInputElement>(null);\n\n  const onCheckinHandler = () => {\n    const pickupTime = pickupTimeInputRef.current!.value;\n\n    if (pickupTime.trim().length === 0) {\n      // error handling\n      return;\n    }\n\n    childrenCtx.toggleCheckin(props.item, pickupTime);\n  };\n\n  const onCheckoutHandler = () => {\n    childrenCtx.toggleCheckin(props.item);\n  };\n\n  const formatPickupTime = (dateTime: string, isCheckedIn: boolean): string => {\n    if (!dateTime || !isCheckedIn) return \"\";\n\n    const convertedDate = new Date(props.item.pickupTime);\n    return convertedDate.toLocaleTimeString([], {\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n      timeZone: \"UTC\",\n    });\n  };\n\n  return (\n    <Box display=\"grid\" gridTemplateColumns=\"50px 1fr 1fr 1fr\" gridGap={3}>\n      <Box p={2}>\n        <Avatar src={props.item.image.small} size={50} />\n      </Box>\n      <Box p={3}>{props.item.name.fullName}</Box>\n      <Box p={3}>\n        {formatPickupTime(props.item.pickupTime, props.item.checkedIn)}\n      </Box>\n      <Box p={3}>\n        {props.item.checkedIn ? (\n          <ButtonOutline onClick={onCheckoutHandler}>Checkout</ButtonOutline>\n        ) : (\n          <div>\n            <TextInput\n              aria-label=\"PickupTime\"\n              name=\"pickupTime\"\n              variant=\"small\"\n              placeholder=\"Pickup time\"\n              ref={pickupTimeInputRef}\n              sx={{ mr: 2 }}\n            />\n            <ButtonPrimary onClick={onCheckinHandler}>Checkin</ButtonPrimary>\n          </div>\n        )}\n      </Box>\n    </Box>\n  );\n};\n\nexport default ChildItem;\n","import { Box, Pagination } from \"@primer/components\";\nimport { useContext } from \"react\";\nimport { ChildrenContext } from \"../../store/children-context\";\nimport ChildItem from \"../ChildItem/ChildItem\";\n\nconst ChildrenList: React.FC = () => {\n  const childrenCtx = useContext(ChildrenContext);\n\n  return (\n    <div>\n      <Box display=\"flex\">\n        <Box flexGrow={1}>\n          <h1>👼 Checkin and checkout management</h1>\n        </Box>\n        <Box sx={{ verticalAlign: \"middle\" }}>\n          <p>\n            {childrenCtx.totalItems} children\n            <br />\n            {childrenCtx.currentPage} / {childrenCtx.pageCount} pages\n          </p>\n        </Box>\n      </Box>\n\n      <Box\n        borderColor=\"border.default\"\n        borderWidth={1}\n        borderStyle=\"solid\"\n        borderRadius={2}\n        bg=\"canvas.subtle\"\n        color=\"fg.muted\"\n      >\n        {/* Header */}\n        <Box\n          display=\"grid\"\n          gridTemplateColumns=\"50px 1fr 1fr 1fr\"\n          gridGap={3}\n          borderBottomColor=\"border.default\"\n          borderBottomStyle=\"solid\"\n          borderBottomWidth={1}\n          fontWeight=\"600\"\n        >\n          <Box p={2}></Box>\n          <Box p={3}>Name</Box>\n          <Box p={3}>Pickup time</Box>\n          <Box p={3}>Action</Box>\n        </Box>\n        {/* Children */}\n        {childrenCtx.loadedItems.map((item) => (\n          <ChildItem key={item.childId} item={item} />\n        ))}\n      </Box>\n\n      {childrenCtx.pageCount > 0 && (\n        <Pagination\n          pageCount={childrenCtx.pageCount}\n          currentPage={childrenCtx.currentPage}\n          onPageChange={childrenCtx.pageChange}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ChildrenList;\n","import { Avatar, Header } from \"@primer/components\";\n\nconst MainNavigation: React.FC = () => {\n  return (\n    <Header>\n      <Header.Item>\n        <Avatar\n          src=\"https://assets.website-files.com/5f64c1a06bfbf4ea417a71af/5faab8e4497c0827cffce4c2_Circle-White_Red-400x400.png\"\n          size={32}\n          mr={2}\n        />\n        <strong>Frontend Demo</strong>\n      </Header.Item>\n      <Header.Item full></Header.Item>\n      <Header.Item>\n        <Header.Link href=\"https://github.com/zoles/hire-me\">\n          <Avatar\n            src=\"https://github.com/github.png\"\n            size={32}\n            alt=\"zoles github\"\n          />\n        </Header.Link>\n      </Header.Item>\n    </Header>\n  );\n};\nexport default MainNavigation;\n","import classes from \"./Layout.module.css\";\nimport MainNavigation from \"./MainNavigation\";\n\nconst Layout: React.FC = (props) => {\n  return (\n    <div>\n      <MainNavigation />\n      <main className={classes.main}>{props.children}</main>\n    </div>\n  );\n};\nexport default Layout;\n","import { ThemeProvider } from \"@primer/components\";\nimport \"./App.css\";\nimport ChildrenList from \"./components/ChildrenList/ChildrenList\";\nimport Layout from \"./components/layout/Layout\";\nimport ChildrenContextProvider from \"./store/children-context\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <ChildrenContextProvider>\n        <ThemeProvider>\n          <Layout>\n            <ChildrenList />\n          </Layout>\n        </ThemeProvider>\n      </ChildrenContextProvider>\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}